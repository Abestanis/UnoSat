/** 
 * Types that represent physical units.
 */
// *** AUTOGENERATED FILE - Do not edit manually! - Changes will be overwritten! *** //

#pragma once

#include <stdint.h>

#ifdef __cplusplus
extern "C" {
#endif


/**
 * Helper macro which allows to select between two macros depending on the presence of an argument.
 */
#define SELECT_UNIT_MACRO_(ignored1, value, NAME, ...) (NAME(value))

/**
 * Helper macro which allows to select between the constructor for an unit, or the unit type itself
 * depending on the existence of an optional argument.
 *
 * @note This allows C code to treat units as if they were C++ classes with an explicit constructor.
 * @param type The unit that will be returned, if no argument was specified.
 * @param constructor The constructor that will be returned, if an argument was specified.
 * @param ... The optional argument, will be passed to the constructor if given.
 */
#define ADD_UNIT_CONSTRUCTOR(type, constructor, ...) \
    SELECT_UNIT_MACRO_(ignored1, ##__VA_ARGS__, constructor, type)

/**
 * Define a new unit type.
 * These types provide a compile-time unit safety.
 *
 * @param type The datatype that is used to represent the unit.
 * @param unit The name of the unit.
 */
#define UNIT_TYPE(type, unit) \
    typedef struct {          \
        type unit;            \
    } unit##_t

/**
 * Define a variant of an unit type.
 * These types represents the same unit, but has a different underlying data type.
 *
 * @param type The datatype that is used to represent this variant.
 * @param unit The name of the base unit.
 * @param variant The appendix to the name that signifies this variant
 */
#define UNIT_VARIANT_TYPE(type, unit, variant) \
    typedef struct {                           \
        type unit;                             \
    } unit##variant##_t

/**
 * A time in milliseconds.
 */
UNIT_TYPE(uint32_t, rtk_ms);
#define rtk_ms_t_CONSTRUCTOR(value) ((rtk_ms_t) {value})
#define rtk_ms_t(...) ADD_UNIT_CONSTRUCTOR(rtk_ms_t, rtk_ms_t_CONSTRUCTOR, __VA_ARGS__)

/**
 * A distance in milli meter.
 */
UNIT_TYPE(int32_t, rtk_mm);
#define rtk_mm_t_CONSTRUCTOR(value) ((rtk_mm_t) {value})
#define rtk_mm_t(...) ADD_UNIT_CONSTRUCTOR(rtk_mm_t, rtk_mm_t_CONSTRUCTOR, __VA_ARGS__)

/**
 * An angle in degrees.
 */
UNIT_TYPE(float, rtk_deg);
#define rtk_deg_t_CONSTRUCTOR(value) ((rtk_deg_t) {value})
#define rtk_deg_t(...) ADD_UNIT_CONSTRUCTOR(rtk_deg_t, rtk_deg_t_CONSTRUCTOR, __VA_ARGS__)



#ifdef __cplusplus
}

#define OPERATOR_IMPLEMENTATION(unit, baseType)                                     \
    constexpr unit ## _t operator+(const unit ## _t left, const unit ## _t right) { \
        return unit ## _t(left.unit + right.unit);                                  \
    }                                                                               \
                                                                                    \
    constexpr unit ## _t operator-(const unit ## _t left, const unit ## _t right) { \
        return unit ## _t(left.unit - right.unit);                                  \
    }                                                                               \
                                                                                    \
    constexpr unit ## _t operator-(const unit ## _t left) {                         \
        return unit ## _t(-left.unit);                                              \
    }                                                                               \
                                                                                    \
    constexpr bool operator<(const unit ## _t left, const unit ## _t right) {       \
        return left.unit < right.unit;                                              \
    }                                                                               \
                                                                                    \
    constexpr bool operator<=(const unit ## _t left, const unit ## _t right) {      \
        return left.unit <= right.unit;                                             \
    }                                                                               \
                                                                                    \
    constexpr bool operator>(const unit ## _t left, const unit ## _t right) {       \
        return left.unit > right.unit;                                              \
    }                                                                               \
                                                                                    \
    constexpr bool operator>=(const unit ## _t left, const unit ## _t right) {      \
        return left.unit >= right.unit;                                             \
    }                                                                               \
                                                                                    \
    constexpr bool operator==(const unit ## _t left, const unit ## _t right) {      \
        return left.unit == right.unit;                                             \
    }                                                                               \
                                                                                    \
    constexpr bool operator!=(const unit ## _t left, const unit ## _t right) {      \
        return left.unit != right.unit;                                             \
    }                                                                               \
                                                                                    \
    constexpr unit ## _t operator "" _ ## unit(unsigned long long value) {          \
        return unit ## _t(static_cast<baseType>(value));                            \
    }                                                                                \


OPERATOR_IMPLEMENTATION(rtk_ms, uint32_t)
OPERATOR_IMPLEMENTATION(rtk_mm, int32_t)
OPERATOR_IMPLEMENTATION(rtk_deg, float)

#endif /* __cplusplus */
